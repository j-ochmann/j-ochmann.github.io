<!DOCTYPE html><html lang="en" dir="ltr" data-theme="dark" data-has-toc data-has-sidebar class="astro-bguv2lll"> <head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Object Creational: Prototype | DevBook</title><link rel="canonical" href="https://j-ochmann.github.io/design_patterns/creational/prototype/"/><link rel="sitemap" href="/sitemap-index.xml"/><link rel="shortcut icon" href="/favicon.svg" type="image/svg+xml"/><meta name="generator" content="Astro v5.16.6"/><meta name="generator" content="Starlight v0.37.1"/><meta property="og:title" content="Object Creational: Prototype"/><meta property="og:type" content="article"/><meta property="og:url" content="https://j-ochmann.github.io/design_patterns/creational/prototype/"/><meta property="og:locale" content="en"/><meta property="og:site_name" content="DevBook"/><meta name="twitter:card" content="summary_large_image"/><script>
	window.StarlightThemeProvider = (() => {
		const storedTheme =
			typeof localStorage !== 'undefined' && localStorage.getItem('starlight-theme');
		const theme =
			storedTheme ||
			(window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
		document.documentElement.dataset.theme = theme === 'light' ? 'light' : 'dark';
		return {
			updatePickers(theme = storedTheme || 'auto') {
				document.querySelectorAll('starlight-theme-select').forEach((picker) => {
					const select = picker.querySelector('select');
					if (select) select.value = theme;
					/** @type {HTMLTemplateElement | null} */
					const tmpl = document.querySelector(`#theme-icons`);
					const newIcon = tmpl && tmpl.content.querySelector('.' + theme);
					if (newIcon) {
						const oldIcon = picker.querySelector('svg.label-icon');
						if (oldIcon) {
							oldIcon.replaceChildren(...newIcon.cloneNode(true).childNodes);
						}
					}
				});
			},
		};
	})();
</script><template id="theme-icons"><svg aria-hidden="true" class="light astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M5 12a1 1 0 0 0-1-1H3a1 1 0 0 0 0 2h1a1 1 0 0 0 1-1Zm.64 5-.71.71a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l.71-.71A1 1 0 0 0 5.64 17ZM12 5a1 1 0 0 0 1-1V3a1 1 0 0 0-2 0v1a1 1 0 0 0 1 1Zm5.66 2.34a1 1 0 0 0 .7-.29l.71-.71a1 1 0 1 0-1.41-1.41l-.66.71a1 1 0 0 0 0 1.41 1 1 0 0 0 .66.29Zm-12-.29a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.71-.71a1.004 1.004 0 1 0-1.43 1.41l.73.71ZM21 11h-1a1 1 0 0 0 0 2h1a1 1 0 0 0 0-2Zm-2.64 6A1 1 0 0 0 17 18.36l.71.71a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.76-.66ZM12 6.5a5.5 5.5 0 1 0 5.5 5.5A5.51 5.51 0 0 0 12 6.5Zm0 9a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7Zm0 3.5a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1a1 1 0 0 0-1-1Z"/></svg><svg aria-hidden="true" class="dark astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.64 13a1 1 0 0 0-1.05-.14 8.049 8.049 0 0 1-3.37.73 8.15 8.15 0 0 1-8.14-8.1 8.59 8.59 0 0 1 .25-2A1 1 0 0 0 8 2.36a10.14 10.14 0 1 0 14 11.69 1 1 0 0 0-.36-1.05Zm-9.5 6.69A8.14 8.14 0 0 1 7.08 5.22v.27a10.15 10.15 0 0 0 10.14 10.14 9.784 9.784 0 0 0 2.1-.22 8.11 8.11 0 0 1-7.18 4.32v-.04Z"/></svg><svg aria-hidden="true" class="auto astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg></template><link rel="stylesheet" href="/_astro/print.DNXP8c50.css" media="print"><link rel="stylesheet" href="/_astro/index.BGYTJlGT.css">
<style>@layer starlight.components{:root{--sl-badge-default-border: var(--sl-color-accent);--sl-badge-default-bg: var(--sl-color-accent-low);--sl-badge-default-text: #fff;--sl-badge-note-border: var(--sl-color-blue);--sl-badge-note-bg: var(--sl-color-blue-low);--sl-badge-note-text: #fff;--sl-badge-danger-border: var(--sl-color-red);--sl-badge-danger-bg: var(--sl-color-red-low);--sl-badge-danger-text: #fff;--sl-badge-success-border: var(--sl-color-green);--sl-badge-success-bg: var(--sl-color-green-low);--sl-badge-success-text: #fff;--sl-badge-caution-border: var(--sl-color-orange);--sl-badge-caution-bg: var(--sl-color-orange-low);--sl-badge-caution-text: #fff;--sl-badge-tip-border: var(--sl-color-purple);--sl-badge-tip-bg: var(--sl-color-purple-low);--sl-badge-tip-text: #fff}[data-theme=light]:root{--sl-badge-default-bg: var(--sl-color-accent-high);--sl-badge-note-bg: var(--sl-color-blue-high);--sl-badge-danger-bg: var(--sl-color-red-high);--sl-badge-success-bg: var(--sl-color-green-high);--sl-badge-caution-bg: var(--sl-color-orange-high);--sl-badge-tip-bg: var(--sl-color-purple-high)}.sl-badge:where(.astro-avdet4wd){display:inline-block;border:1px solid var(--sl-color-border-badge);border-radius:.25rem;font-family:var(--sl-font-system-mono);line-height:normal;color:var(--sl-color-text-badge);background-color:var(--sl-color-bg-badge);overflow-wrap:anywhere}.sidebar-content .sl-badge:where(.astro-avdet4wd){line-height:1;font-size:var(--sl-text-xs);padding:.125rem .375rem}.sidebar-content a[aria-current=page]>.sl-badge:where(.astro-avdet4wd){--sl-color-bg-badge: transparent;--sl-color-border-badge: currentColor;color:inherit}.default:where(.astro-avdet4wd){--sl-color-bg-badge: var(--sl-badge-default-bg);--sl-color-border-badge: var(--sl-badge-default-border);--sl-color-text-badge: var(--sl-badge-default-text)}.note:where(.astro-avdet4wd){--sl-color-bg-badge: var(--sl-badge-note-bg);--sl-color-border-badge: var(--sl-badge-note-border);--sl-color-text-badge: var(--sl-badge-note-text)}.danger:where(.astro-avdet4wd){--sl-color-bg-badge: var(--sl-badge-danger-bg);--sl-color-border-badge: var(--sl-badge-danger-border);--sl-color-text-badge: var(--sl-badge-danger-text)}.success:where(.astro-avdet4wd){--sl-color-bg-badge: var(--sl-badge-success-bg);--sl-color-border-badge: var(--sl-badge-success-border);--sl-color-text-badge: var(--sl-badge-success-text)}.tip:where(.astro-avdet4wd){--sl-color-bg-badge: var(--sl-badge-tip-bg);--sl-color-border-badge: var(--sl-badge-tip-border);--sl-color-text-badge: var(--sl-badge-tip-text)}.caution:where(.astro-avdet4wd){--sl-color-bg-badge: var(--sl-badge-caution-bg);--sl-color-border-badge: var(--sl-badge-caution-border);--sl-color-text-badge: var(--sl-badge-caution-text)}.small:where(.astro-avdet4wd){font-size:var(--sl-text-xs);padding:.125rem .25rem}.medium:where(.astro-avdet4wd){font-size:var(--sl-text-sm);padding:.175rem .35rem}.large:where(.astro-avdet4wd){font-size:var(--sl-text-base);padding:.225rem .45rem}.sl-markdown-content :is(h1,h2,h3,h4,h5,h6) .sl-badge:where(.astro-avdet4wd){vertical-align:middle}}
@layer starlight.components{.card-grid:where(.astro-zntqmydn){display:grid;grid-template-columns:100%;gap:1rem}.card-grid:where(.astro-zntqmydn)>*{margin-top:0!important}@media(min-width:50rem){.card-grid:where(.astro-zntqmydn){grid-template-columns:1fr 1fr;gap:1.5rem}.stagger:where(.astro-zntqmydn){--stagger-height: 5rem;padding-bottom:var(--stagger-height)}.stagger:where(.astro-zntqmydn)>*:nth-child(2n){transform:translateY(var(--stagger-height))}}}
@layer starlight.components{.card:where(.astro-v5tidmuc){--sl-card-border: var(--sl-color-purple);--sl-card-bg: var(--sl-color-purple-low);border:1px solid var(--sl-color-gray-5);background-color:var(--sl-color-black);padding:clamp(1rem,calc(.125rem + 3vw),2.5rem);flex-direction:column;gap:clamp(.5rem,calc(.125rem + 1vw),1rem)}.card:where(.astro-v5tidmuc):nth-child(4n+1){--sl-card-border: var(--sl-color-orange);--sl-card-bg: var(--sl-color-orange-low)}.card:where(.astro-v5tidmuc):nth-child(4n+3){--sl-card-border: var(--sl-color-green);--sl-card-bg: var(--sl-color-green-low)}.card:where(.astro-v5tidmuc):nth-child(4n+4){--sl-card-border: var(--sl-color-red);--sl-card-bg: var(--sl-color-red-low)}.card:where(.astro-v5tidmuc):nth-child(4n+5){--sl-card-border: var(--sl-color-blue);--sl-card-bg: var(--sl-color-blue-low)}.title:where(.astro-v5tidmuc){font-weight:600;font-size:var(--sl-text-h4);color:var(--sl-color-white);line-height:var(--sl-line-height-headings);gap:1rem;align-items:center}.card:where(.astro-v5tidmuc) .icon:where(.astro-v5tidmuc){border:1px solid var(--sl-card-border);background-color:var(--sl-card-bg);padding:.2em;border-radius:.25rem;flex-shrink:0}.card:where(.astro-v5tidmuc) .body:where(.astro-v5tidmuc){margin:0;font-size:clamp(var(--sl-text-sm),calc(.5rem + 1vw),var(--sl-text-body))}}
@layer starlight.components{svg:where(.astro-c6vsoqas){color:var(--sl-icon-color);font-size:var(--sl-icon-size, 1em);width:1em;height:1em}}
@layer starlight.components{.sl-steps{--bullet-size: calc(var(--sl-line-height) * 1rem);--bullet-margin: .375rem;list-style:none;counter-reset:steps-counter var(--sl-steps-start, 0);padding-inline-start:0}.sl-steps>li{counter-increment:steps-counter;position:relative;padding-inline-start:calc(var(--bullet-size) + 1rem);padding-bottom:1px;min-height:calc(var(--bullet-size) + var(--bullet-margin))}.sl-steps>li+li{margin-top:0}.sl-steps>li:before{content:counter(steps-counter);position:absolute;top:0;inset-inline-start:0;width:var(--bullet-size);height:var(--bullet-size);line-height:var(--bullet-size);font-size:var(--sl-text-xs);font-weight:600;text-align:center;color:var(--sl-color-white);background-color:var(--sl-color-gray-6);border-radius:99rem;box-shadow:inset 0 0 0 1px var(--sl-color-gray-5)}.sl-steps>li:after{--guide-width: 1px;content:"";position:absolute;top:calc(var(--bullet-size) + var(--bullet-margin));bottom:var(--bullet-margin);inset-inline-start:calc((var(--bullet-size) - var(--guide-width)) / 2);width:var(--guide-width);background-color:var(--sl-color-hairline-light)}}@layer starlight.content{.sl-steps>li>:first-child{--lh: calc(1em * var(--sl-line-height));--shift-y: calc(.5 * (var(--bullet-size) - var(--lh)));transform:translateY(var(--shift-y));margin-bottom:var(--shift-y)}.sl-steps>li>:first-child:where(h1,h2,h3,h4,h5,h6){--lh: calc(1em * var(--sl-line-height-headings))}@supports (--prop: 1lh){.sl-steps>li>:first-child{--lh: 1lh}}}
@layer starlight.components{.sl-link-button:where(.astro-xwgiixxa){align-items:center;border:1px solid transparent;border-radius:999rem;display:inline-flex;font-size:var(--sl-text-sm);gap:.5em;line-height:1.1875;outline-offset:.25rem;padding:.4375rem 1.125rem;text-decoration:none}.sl-link-button:where(.astro-xwgiixxa).primary{background:var(--sl-color-text-accent);border-color:var(--sl-color-text-accent);color:var(--sl-color-black)}.sl-link-button:where(.astro-xwgiixxa).primary:hover{color:var(--sl-color-black)}.sl-link-button:where(.astro-xwgiixxa).secondary{border-color:inherit;color:var(--sl-color-white)}.sl-link-button:where(.astro-xwgiixxa).minimal{color:var(--sl-color-white);padding-inline:0}.sl-link-button:where(.astro-xwgiixxa) svg{flex-shrink:0}@media(min-width:50rem){.sl-link-button:where(.astro-xwgiixxa){font-size:var(--sl-text-base);padding:.9375rem 1.25rem}}.sl-markdown-content .sl-link-button:where(.astro-xwgiixxa){margin-inline-end:1rem}.sl-markdown-content .sl-link-button:where(.astro-xwgiixxa):not(:where(p *)){margin-block:1rem}}
</style><script type="module" src="/_astro/page.B1D-nYk3.js"></script></head> <body class="astro-bguv2lll"> <a href="#_top" class="astro-7q3lir66">Skip to content</a>  <div class="page sl-flex astro-vrdttmbt"> <header class="header astro-vrdttmbt"><div class="header astro-kmkmnagf"> <div class="title-wrapper sl-flex astro-kmkmnagf"> <a href="/" class="site-title sl-flex astro-m46x6ez3">  <span class="astro-m46x6ez3" translate="no"> DevBook </span> </a>  </div> <div class="sl-flex print:hidden astro-kmkmnagf"> <site-search class="astro-kmkmnagf astro-v37mnknz" data-translations="{&#34;placeholder&#34;:&#34;Search&#34;}"> <button data-open-modal disabled aria-label="Search" aria-keyshortcuts="Control+K" class="astro-v37mnknz"> <svg aria-hidden="true" class="astro-v37mnknz astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.71 20.29 18 16.61A9 9 0 1 0 16.61 18l3.68 3.68a.999.999 0 0 0 1.42 0 1 1 0 0 0 0-1.39ZM11 18a7 7 0 1 1 0-14 7 7 0 0 1 0 14Z"/></svg> <span class="sl-hidden md:sl-block astro-v37mnknz" aria-hidden="true">Search</span> <kbd class="sl-hidden md:sl-flex astro-v37mnknz" style="display: none;"> <kbd class="astro-v37mnknz">Ctrl</kbd><kbd class="astro-v37mnknz">K</kbd> </kbd> </button> <dialog style="padding:0" aria-label="Search" class="astro-v37mnknz"> <div class="dialog-frame sl-flex astro-v37mnknz">  <button data-close-modal class="sl-flex md:sl-hidden astro-v37mnknz"> Cancel </button> <div class="search-container astro-v37mnknz"> <div id="starlight__search" class="astro-v37mnknz"></div> </div> </div> </dialog> </site-search>  <script>
	(() => {
		const openBtn = document.querySelector('button[data-open-modal]');
		const shortcut = openBtn?.querySelector('kbd');
		if (!openBtn || !(shortcut instanceof HTMLElement)) return;
		const platformKey = shortcut.querySelector('kbd');
		if (platformKey && /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)) {
			platformKey.textContent = '⌘';
			openBtn.setAttribute('aria-keyshortcuts', 'Meta+K');
		}
		shortcut.style.display = '';
	})();
</script> <script type="module" src="/_astro/Search.astro_astro_type_script_index_0_lang.cjYDvRdi.js"></script>   </div> <div class="sl-hidden md:sl-flex print:hidden right-group astro-kmkmnagf"> <div class="sl-flex social-icons astro-kmkmnagf"> <a href="https://github.com/j-ochmann" rel="me" class="sl-flex astro-wy4te6ga"><span class="sr-only astro-wy4te6ga">GitHub</span><svg aria-hidden="true" class="astro-wy4te6ga astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg></a> </div> <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-4yphtoen"> <span class="sr-only astro-4yphtoen">Select theme</span> <svg aria-hidden="true" class="icon label-icon astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg> <select autocomplete="off" class="astro-4yphtoen"> <option value="dark" class="astro-4yphtoen">Dark</option><option value="light" class="astro-4yphtoen">Light</option><option value="auto" selected class="astro-4yphtoen">Auto</option> </select> <svg aria-hidden="true" class="icon caret astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg> </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script> <script type="module">const r="starlight-theme",o=e=>e==="auto"||e==="dark"||e==="light"?e:"auto",c=()=>o(typeof localStorage<"u"&&localStorage.getItem(r));function n(e){typeof localStorage<"u"&&localStorage.setItem(r,e==="light"||e==="dark"?e:"")}const l=()=>matchMedia("(prefers-color-scheme: light)").matches?"light":"dark";function t(e){StarlightThemeProvider.updatePickers(e),document.documentElement.dataset.theme=e==="auto"?l():e,n(e)}matchMedia("(prefers-color-scheme: light)").addEventListener("change",()=>{c()==="auto"&&t("auto")});class s extends HTMLElement{constructor(){super(),t(c()),this.querySelector("select")?.addEventListener("change",a=>{a.currentTarget instanceof HTMLSelectElement&&t(o(a.currentTarget.value))})}}customElements.define("starlight-theme-select",s);</script> <script type="module">class s extends HTMLElement{constructor(){super();const e=this.querySelector("select");e&&(e.addEventListener("change",t=>{t.currentTarget instanceof HTMLSelectElement&&(window.location.pathname=t.currentTarget.value)}),window.addEventListener("pageshow",t=>{if(!t.persisted)return;const n=e.querySelector("option[selected]")?.index;n!==e.selectedIndex&&(e.selectedIndex=n??0)}))}}customElements.define("starlight-lang-select",s);</script> </div> </div> </header> <nav class="sidebar print:hidden astro-vrdttmbt" aria-label="Main"> <starlight-menu-button class="print:hidden astro-jif73yzw"> <button aria-expanded="false" aria-label="Menu" aria-controls="starlight__sidebar" class="sl-flex md:sl-hidden astro-jif73yzw"> <svg aria-hidden="true" class="open-menu astro-jif73yzw astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M3 8h18a1 1 0 1 0 0-2H3a1 1 0 0 0 0 2Zm18 8H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Zm0-5H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Z"/></svg> <svg aria-hidden="true" class="close-menu astro-jif73yzw astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="m13.41 12 6.3-6.29a1.004 1.004 0 1 0-1.42-1.42L12 10.59l-6.29-6.3a1.004 1.004 0 0 0-1.42 1.42l6.3 6.29-6.3 6.29a1 1 0 0 0 0 1.42.998.998 0 0 0 1.42 0l6.29-6.3 6.29 6.3a.999.999 0 0 0 1.42 0 1 1 0 0 0 0-1.42L13.41 12Z"/></svg> </button> </starlight-menu-button> <script type="module">class s extends HTMLElement{constructor(){super(),this.btn=this.querySelector("button"),this.btn.addEventListener("click",()=>this.toggleExpanded());const t=this.closest("nav");t&&t.addEventListener("keyup",e=>this.closeOnEscape(e))}setExpanded(t){this.setAttribute("aria-expanded",String(t)),document.body.toggleAttribute("data-mobile-menu-expanded",t)}toggleExpanded(){this.setExpanded(this.getAttribute("aria-expanded")!=="true")}closeOnEscape(t){t.code==="Escape"&&(this.setExpanded(!1),this.btn.focus())}}customElements.define("starlight-menu-button",s);</script>   <div id="starlight__sidebar" class="sidebar-pane astro-vrdttmbt"> <div class="sidebar-content sl-flex astro-vrdttmbt"> <sl-sidebar-state-persist data-hash="1mzibzf" class="astro-kku4brbg"> <script aria-hidden="true">
		(() => {
			try {
				if (!matchMedia('(min-width: 50em)').matches) return;
				/** @type {HTMLElement | null} */
				const target = document.querySelector('sl-sidebar-state-persist');
				const state = JSON.parse(sessionStorage.getItem('sl-sidebar-state') || '0');
				if (!target || !state || target.dataset.hash !== state.hash) return;
				window._starlightScrollRestore = state.scroll;
				customElements.define(
					'sl-sidebar-restore',
					class SidebarRestore extends HTMLElement {
						connectedCallback() {
							try {
								const idx = parseInt(this.dataset.index || '');
								const details = this.closest('details');
								if (details && typeof state.open[idx] === 'boolean') details.open = state.open[idx];
							} catch {}
						}
					}
				);
			} catch {}
		})();
	</script>  <ul class="top-level astro-3ii7xxms"> <li class="astro-3ii7xxms"> <details class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <span class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Quick Reference</span>  </span> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="0"></sl-sidebar-restore> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/quick_reference/cpp/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">C++</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <span class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Design Patterns</span>  </span> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="1"></sl-sidebar-restore> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/design_patterns/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Overview</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <span class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Creational</span>  </span> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="2"></sl-sidebar-restore> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/design_patterns/creational/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Overview</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/design_patterns/creational/abstract_factory/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Abstract Factory</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/design_patterns/creational/builder/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Builder</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/design_patterns/creational/factory_methot/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Factory Method</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/design_patterns/creational/prototype/" aria-current="page" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Prototype</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/design_patterns/creational/singleton/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Singleton</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/design_patterns/creational/discussion/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Discussion</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <span class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Structural</span>  </span> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="3"></sl-sidebar-restore> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/design_patterns/structural/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Overview</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/design_patterns/structural/adapter/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Adapter</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/design_patterns/structural/bridge/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Bridge</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/design_patterns/structural/composite/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Composite</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/design_patterns/structural/decorator/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Decorator</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/design_patterns/structural/facade/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Facade</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/design_patterns/structural/flyweight/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Flyweight</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/design_patterns/structural/proxy/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Proxy</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/design_patterns/structural/discussion/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Discussion</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <span class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Behavioral</span>  </span> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="4"></sl-sidebar-restore> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/design_patterns/behavioral/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Overview</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/design_patterns/behavioral/chain_of_responsibility/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Chain of Responsibility</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/design_patterns/behavioral/command/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Command</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/design_patterns/behavioral/interpreter/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Interpreter</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/design_patterns/behavioral/iterator/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Iterator</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/design_patterns/behavioral/mediator/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Mediator</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/design_patterns/behavioral/memento/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Memento</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/design_patterns/behavioral/observer/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Observer</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/design_patterns/behavioral/state/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">State</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/design_patterns/behavioral/strategy/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Strategy</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/design_patterns/behavioral/template_method/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Template Method</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/design_patterns/behavioral/visitor/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Visitor</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/design_patterns/behavioral/discussion/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Discussion</span>  </a> </li> </ul>  </details> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/external_resources/" aria-current="false" class="large astro-3ii7xxms"> <span class="astro-3ii7xxms">External Resources</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/3d-graph-example/" aria-current="false" class="large astro-3ii7xxms"> <span class="astro-3ii7xxms">3D Graph Example</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/ai/" aria-current="false" class="large astro-3ii7xxms"> <span class="astro-3ii7xxms">Artificial Intelligence</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/courses/" aria-current="false" class="large astro-3ii7xxms"> <span class="astro-3ii7xxms">Courses</span> <span class="sl-badge default small  astro-3ii7xxms astro-avdet4wd">Free</span> </a> </li> </ul>   <script aria-hidden="true">
		(() => {
			const scroller = document.getElementById('starlight__sidebar');
			if (!window._starlightScrollRestore || !scroller) return;
			scroller.scrollTop = window._starlightScrollRestore;
			delete window._starlightScrollRestore;
		})();
	</script> </sl-sidebar-state-persist>  <div class="md:sl-hidden"> <div class="mobile-preferences sl-flex astro-wu23bvmt"> <div class="social-icons astro-wu23bvmt"> <a href="https://github.com/j-ochmann" rel="me" class="sl-flex astro-wy4te6ga"><span class="sr-only astro-wy4te6ga">GitHub</span><svg aria-hidden="true" class="astro-wy4te6ga astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg></a> </div> <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-4yphtoen"> <span class="sr-only astro-4yphtoen">Select theme</span> <svg aria-hidden="true" class="icon label-icon astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg> <select autocomplete="off" class="astro-4yphtoen"> <option value="dark" class="astro-4yphtoen">Dark</option><option value="light" class="astro-4yphtoen">Light</option><option value="auto" selected class="astro-4yphtoen">Auto</option> </select> <svg aria-hidden="true" class="icon caret astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg> </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script>   </div>  </div> </div> </div> </nav> <div class="main-frame astro-vrdttmbt">  <script type="module">const a=document.getElementById("starlight__sidebar"),n=a?.querySelector("sl-sidebar-state-persist"),o="sl-sidebar-state",i=()=>{let t=[];const e=n?.dataset.hash||"";try{const s=sessionStorage.getItem(o),r=JSON.parse(s||"{}");Array.isArray(r.open)&&r.hash===e&&(t=r.open)}catch{}return{hash:e,open:t,scroll:a?.scrollTop||0}},c=t=>{try{sessionStorage.setItem(o,JSON.stringify(t))}catch{}},d=()=>c(i()),l=(t,e)=>{const s=i();s.open[e]=t,c(s)};n?.addEventListener("click",t=>{if(!(t.target instanceof Element))return;const e=t.target.closest("summary")?.closest("details");if(!e)return;const s=e.querySelector("sl-sidebar-restore"),r=parseInt(s?.dataset.index||"");isNaN(r)||l(!e.open,r)});addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&d()});addEventListener("pageHide",d);</script> <div class="lg:sl-flex astro-67yu43on"> <aside class="right-sidebar-container print:hidden astro-67yu43on"> <div class="right-sidebar astro-67yu43on"> <div class="lg:sl-hidden astro-pb3aqygn"><mobile-starlight-toc data-min-h="2" data-max-h="3" class="astro-doynk5tl"><nav aria-labelledby="starlight__on-this-page--mobile" class="astro-doynk5tl"><details id="starlight__mobile-toc" class="astro-doynk5tl"><summary id="starlight__on-this-page--mobile" class="sl-flex astro-doynk5tl"><span class="toggle sl-flex astro-doynk5tl">On this page<svg aria-hidden="true" class="caret astro-doynk5tl astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg></span><span class="display-current astro-doynk5tl"></span></summary><div class="dropdown astro-doynk5tl"><ul class="isMobile astro-g2bywc46" style="--depth: 0;"> <li class="astro-g2bywc46" style="--depth: 0;"> <a href="#_top" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Overview</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#intent" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Intent</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#motivation" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Motivation</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#applicability" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Applicability</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#structure" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Structure</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#participants" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Participants</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#collaborations" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Collaborations</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#consequences" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Consequences</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#implementation" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Implementation</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#sample-code" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Sample Code</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#known-uses" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Known Uses</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#related-patterns" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Related Patterns</span> </a>  </li> </ul> </div></details></nav></mobile-starlight-toc><script type="module" src="/_astro/MobileTableOfContents.astro_astro_type_script_index_0_lang.C181hMzK.js"></script></div><div class="right-sidebar-panel sl-hidden lg:sl-block astro-pb3aqygn"><div class="sl-container astro-pb3aqygn"><starlight-toc data-min-h="2" data-max-h="3"><nav aria-labelledby="starlight__on-this-page"><h2 id="starlight__on-this-page">On this page</h2><ul class="astro-g2bywc46" style="--depth: 0;"> <li class="astro-g2bywc46" style="--depth: 0;"> <a href="#_top" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Overview</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#intent" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Intent</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#motivation" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Motivation</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#applicability" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Applicability</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#structure" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Structure</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#participants" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Participants</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#collaborations" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Collaborations</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#consequences" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Consequences</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#implementation" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Implementation</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#sample-code" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Sample Code</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#known-uses" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Known Uses</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#related-patterns" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Related Patterns</span> </a>  </li> </ul> </nav></starlight-toc><script type="module" src="/_astro/TableOfContents.astro_astro_type_script_index_0_lang.CKWWgpjV.js"></script></div></div> </div> </aside> <div class="main-pane astro-67yu43on">  <main data-pagefind-body class="astro-bguv2lll" lang="en" dir="ltr">    <div class="content-panel astro-7nkwcw3z"> <div class="sl-container astro-7nkwcw3z"> <h1 id="_top" class="astro-j6tvhyss">Object Creational: Prototype</h1>  </div> </div>  <div class="content-panel astro-7nkwcw3z"> <div class="sl-container astro-7nkwcw3z"> <div class="sl-markdown-content"> <div class="sl-heading-wrapper level-h2"><h2 id="intent">Intent</h2><a class="sl-anchor-link" href="#intent"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Intent”</span></a></div>
<p>Specify the kinds of objects to create using a prototypical instance, and create new objects by copying this prototype.</p>
<div class="sl-heading-wrapper level-h2"><h2 id="motivation">Motivation</h2><a class="sl-anchor-link" href="#motivation"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Motivation”</span></a></div>
<p>You could build an editor for music scores by customizing a general framework for graphical editors and adding new objects that represent notes, rests, and staves. The editor framework may have a palette of tools for adding these music objects to the score. The palette would also include tools for selecting, moving, and otherwise manipulating music objects. Users will click on the quarter-note tool and use it to add quarter notes to the score. Or they can use the move tool to move a note up or down on the staff, thereby changing its pitch.</p>
<p>Let’s assume the framework provides an abstract Graphic class for graphical components, like notes and staves. Moreover, it’ll provide an abstract Tool class for defining tools like those in the palette. The framework also predefines a GraphicTool subclass for tools that create instances of graphical objects and add them to the document.</p>
<p>But GraphicTool presents a problem to the framework designer. The classes for notes and staves are specific to our application, but the GraphicTool class belongs to the framework. GraphicTool doesn’t know how to create instances of our music classes to add to the score. We could subclass GraphicTool for each kind of music object, but that would produce lots of subclasses that differ only in the kind of music object they instantiate. We know object composition is a flexible alternative to subclassing. The question is, how can the framework use it to parameterize instances of GraphicTool by the class of Graphic they’re supposed to create?</p>
<p>The solution lies in making GraphicTool create a new Graphic by copying or “cloning” an instance of a Graphic subclass. We call this instance a prototype. GraphicTool is parameterized by the prototype it should clone and add to the document. If all Graphic subclasses support a Clone operation, then the GraphicTool can clone any kind of Graphic.</p>
<p>So in our music editor, each tool for creating a music object is an instance of GraphicTool that’s initialized with a different prototype. Each GraphicTool instance will produce a music object by cloning its prototype and adding the clone to the score.</p>
<img alt="" height="100" id="mermaid-0" src="data:image/svg+xml,%3csvg id=&#x27;mermaid-0&#x27; width=&#x27;100%25&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; xmlns:xlink=&#x27;http://www.w3.org/1999/xlink&#x27; class=&#x27;classDiagram&#x27; style=&#x27;max-width: 98.6875px%3b&#x27; viewBox=&#x27;0 0 98.6875 100&#x27; role=&#x27;graphics-document document&#x27; aria-roledescription=&#x27;class&#x27;%3e%3cstyle%3e%23mermaid-0%7bfont-family:arial%2csans-serif%3bfont-size:16px%3bfill:%23333%3b%7d%40keyframes edge-animation-frame%7bfrom%7bstroke-dashoffset:0%3b%7d%7d%40keyframes dash%7bto%7bstroke-dashoffset:0%3b%7d%7d%23mermaid-0 .edge-animation-slow%7bstroke-dasharray:9%2c5!important%3bstroke-dashoffset:900%3banimation:dash 50s linear infinite%3bstroke-linecap:round%3b%7d%23mermaid-0 .edge-animation-fast%7bstroke-dasharray:9%2c5!important%3bstroke-dashoffset:900%3banimation:dash 20s linear infinite%3bstroke-linecap:round%3b%7d%23mermaid-0 .error-icon%7bfill:%23552222%3b%7d%23mermaid-0 .error-text%7bfill:%23552222%3bstroke:%23552222%3b%7d%23mermaid-0 .edge-thickness-normal%7bstroke-width:1px%3b%7d%23mermaid-0 .edge-thickness-thick%7bstroke-width:3.5px%3b%7d%23mermaid-0 .edge-pattern-solid%7bstroke-dasharray:0%3b%7d%23mermaid-0 .edge-thickness-invisible%7bstroke-width:0%3bfill:none%3b%7d%23mermaid-0 .edge-pattern-dashed%7bstroke-dasharray:3%3b%7d%23mermaid-0 .edge-pattern-dotted%7bstroke-dasharray:2%3b%7d%23mermaid-0 .marker%7bfill:%23333333%3bstroke:%23333333%3b%7d%23mermaid-0 .marker.cross%7bstroke:%23333333%3b%7d%23mermaid-0 svg%7bfont-family:arial%2csans-serif%3bfont-size:16px%3b%7d%23mermaid-0 p%7bmargin:0%3b%7d%23mermaid-0 g.classGroup text%7bfill:%239370DB%3bstroke:none%3bfont-family:arial%2csans-serif%3bfont-size:10px%3b%7d%23mermaid-0 g.classGroup text .title%7bfont-weight:bolder%3b%7d%23mermaid-0 .nodeLabel%2c%23mermaid-0 .edgeLabel%7bcolor:%23131300%3b%7d%23mermaid-0 .edgeLabel .label rect%7bfill:%23ECECFF%3b%7d%23mermaid-0 .label text%7bfill:%23131300%3b%7d%23mermaid-0 .labelBkg%7bbackground:%23ECECFF%3b%7d%23mermaid-0 .edgeLabel .label span%7bbackground:%23ECECFF%3b%7d%23mermaid-0 .classTitle%7bfont-weight:bolder%3b%7d%23mermaid-0 .node rect%2c%23mermaid-0 .node circle%2c%23mermaid-0 .node ellipse%2c%23mermaid-0 .node polygon%2c%23mermaid-0 .node path%7bfill:%23ECECFF%3bstroke:%239370DB%3bstroke-width:1px%3b%7d%23mermaid-0 .divider%7bstroke:%239370DB%3bstroke-width:1%3b%7d%23mermaid-0 g.clickable%7bcursor:pointer%3b%7d%23mermaid-0 g.classGroup rect%7bfill:%23ECECFF%3bstroke:%239370DB%3b%7d%23mermaid-0 g.classGroup line%7bstroke:%239370DB%3bstroke-width:1%3b%7d%23mermaid-0 .classLabel .box%7bstroke:none%3bstroke-width:0%3bfill:%23ECECFF%3bopacity:0.5%3b%7d%23mermaid-0 .classLabel .label%7bfill:%239370DB%3bfont-size:10px%3b%7d%23mermaid-0 .relation%7bstroke:%23333333%3bstroke-width:1%3bfill:none%3b%7d%23mermaid-0 .dashed-line%7bstroke-dasharray:3%3b%7d%23mermaid-0 .dotted-line%7bstroke-dasharray:1 2%3b%7d%23mermaid-0 %23compositionStart%2c%23mermaid-0 .composition%7bfill:%23333333!important%3bstroke:%23333333!important%3bstroke-width:1%3b%7d%23mermaid-0 %23compositionEnd%2c%23mermaid-0 .composition%7bfill:%23333333!important%3bstroke:%23333333!important%3bstroke-width:1%3b%7d%23mermaid-0 %23dependencyStart%2c%23mermaid-0 .dependency%7bfill:%23333333!important%3bstroke:%23333333!important%3bstroke-width:1%3b%7d%23mermaid-0 %23dependencyStart%2c%23mermaid-0 .dependency%7bfill:%23333333!important%3bstroke:%23333333!important%3bstroke-width:1%3b%7d%23mermaid-0 %23extensionStart%2c%23mermaid-0 .extension%7bfill:transparent!important%3bstroke:%23333333!important%3bstroke-width:1%3b%7d%23mermaid-0 %23extensionEnd%2c%23mermaid-0 .extension%7bfill:transparent!important%3bstroke:%23333333!important%3bstroke-width:1%3b%7d%23mermaid-0 %23aggregationStart%2c%23mermaid-0 .aggregation%7bfill:transparent!important%3bstroke:%23333333!important%3bstroke-width:1%3b%7d%23mermaid-0 %23aggregationEnd%2c%23mermaid-0 .aggregation%7bfill:transparent!important%3bstroke:%23333333!important%3bstroke-width:1%3b%7d%23mermaid-0 %23lollipopStart%2c%23mermaid-0 .lollipop%7bfill:%23ECECFF!important%3bstroke:%23333333!important%3bstroke-width:1%3b%7d%23mermaid-0 %23lollipopEnd%2c%23mermaid-0 .lollipop%7bfill:%23ECECFF!important%3bstroke:%23333333!important%3bstroke-width:1%3b%7d%23mermaid-0 .edgeTerminals%7bfont-size:11px%3bline-height:initial%3b%7d%23mermaid-0 .classTitleText%7btext-anchor:middle%3bfont-size:18px%3bfill:%23333%3b%7d%23mermaid-0 .label-icon%7bdisplay:inline-block%3bheight:1em%3boverflow:visible%3bvertical-align:-0.125em%3b%7d%23mermaid-0 .node .label-icon path%7bfill:currentColor%3bstroke:revert%3bstroke-width:revert%3b%7d%23mermaid-0 :root%7b--mermaid-font-family:arial%2csans-serif%3b%7d%3c/style%3e%3cg%3e%3cdefs%3e%3cmarker id=&#x27;mermaid-0_class-aggregationStart&#x27; class=&#x27;marker aggregation class&#x27; refX=&#x27;18&#x27; refY=&#x27;7&#x27; markerWidth=&#x27;190&#x27; markerHeight=&#x27;240&#x27; orient=&#x27;auto&#x27;%3e%3cpath d=&#x27;M 18%2c7 L9%2c13 L1%2c7 L9%2c1 Z&#x27;/%3e%3c/marker%3e%3c/defs%3e%3cdefs%3e%3cmarker id=&#x27;mermaid-0_class-aggregationEnd&#x27; class=&#x27;marker aggregation class&#x27; refX=&#x27;1&#x27; refY=&#x27;7&#x27; markerWidth=&#x27;20&#x27; markerHeight=&#x27;28&#x27; orient=&#x27;auto&#x27;%3e%3cpath d=&#x27;M 18%2c7 L9%2c13 L1%2c7 L9%2c1 Z&#x27;/%3e%3c/marker%3e%3c/defs%3e%3cdefs%3e%3cmarker id=&#x27;mermaid-0_class-extensionStart&#x27; class=&#x27;marker extension class&#x27; refX=&#x27;18&#x27; refY=&#x27;7&#x27; markerWidth=&#x27;190&#x27; markerHeight=&#x27;240&#x27; orient=&#x27;auto&#x27;%3e%3cpath d=&#x27;M 1%2c7 L18%2c13 V 1 Z&#x27;/%3e%3c/marker%3e%3c/defs%3e%3cdefs%3e%3cmarker id=&#x27;mermaid-0_class-extensionEnd&#x27; class=&#x27;marker extension class&#x27; refX=&#x27;1&#x27; refY=&#x27;7&#x27; markerWidth=&#x27;20&#x27; markerHeight=&#x27;28&#x27; orient=&#x27;auto&#x27;%3e%3cpath d=&#x27;M 1%2c1 V 13 L18%2c7 Z&#x27;/%3e%3c/marker%3e%3c/defs%3e%3cdefs%3e%3cmarker id=&#x27;mermaid-0_class-compositionStart&#x27; class=&#x27;marker composition class&#x27; refX=&#x27;18&#x27; refY=&#x27;7&#x27; markerWidth=&#x27;190&#x27; markerHeight=&#x27;240&#x27; orient=&#x27;auto&#x27;%3e%3cpath d=&#x27;M 18%2c7 L9%2c13 L1%2c7 L9%2c1 Z&#x27;/%3e%3c/marker%3e%3c/defs%3e%3cdefs%3e%3cmarker id=&#x27;mermaid-0_class-compositionEnd&#x27; class=&#x27;marker composition class&#x27; refX=&#x27;1&#x27; refY=&#x27;7&#x27; markerWidth=&#x27;20&#x27; markerHeight=&#x27;28&#x27; orient=&#x27;auto&#x27;%3e%3cpath d=&#x27;M 18%2c7 L9%2c13 L1%2c7 L9%2c1 Z&#x27;/%3e%3c/marker%3e%3c/defs%3e%3cdefs%3e%3cmarker id=&#x27;mermaid-0_class-dependencyStart&#x27; class=&#x27;marker dependency class&#x27; refX=&#x27;6&#x27; refY=&#x27;7&#x27; markerWidth=&#x27;190&#x27; markerHeight=&#x27;240&#x27; orient=&#x27;auto&#x27;%3e%3cpath d=&#x27;M 5%2c7 L9%2c13 L1%2c7 L9%2c1 Z&#x27;/%3e%3c/marker%3e%3c/defs%3e%3cdefs%3e%3cmarker id=&#x27;mermaid-0_class-dependencyEnd&#x27; class=&#x27;marker dependency class&#x27; refX=&#x27;13&#x27; refY=&#x27;7&#x27; markerWidth=&#x27;20&#x27; markerHeight=&#x27;28&#x27; orient=&#x27;auto&#x27;%3e%3cpath d=&#x27;M 18%2c7 L9%2c13 L14%2c7 L9%2c1 Z&#x27;/%3e%3c/marker%3e%3c/defs%3e%3cdefs%3e%3cmarker id=&#x27;mermaid-0_class-lollipopStart&#x27; class=&#x27;marker lollipop class&#x27; refX=&#x27;13&#x27; refY=&#x27;7&#x27; markerWidth=&#x27;190&#x27; markerHeight=&#x27;240&#x27; orient=&#x27;auto&#x27;%3e%3ccircle stroke=&#x27;black&#x27; fill=&#x27;transparent&#x27; cx=&#x27;7&#x27; cy=&#x27;7&#x27; r=&#x27;6&#x27;/%3e%3c/marker%3e%3c/defs%3e%3cdefs%3e%3cmarker id=&#x27;mermaid-0_class-lollipopEnd&#x27; class=&#x27;marker lollipop class&#x27; refX=&#x27;1&#x27; refY=&#x27;7&#x27; markerWidth=&#x27;190&#x27; markerHeight=&#x27;240&#x27; orient=&#x27;auto&#x27;%3e%3ccircle stroke=&#x27;black&#x27; fill=&#x27;transparent&#x27; cx=&#x27;7&#x27; cy=&#x27;7&#x27; r=&#x27;6&#x27;/%3e%3c/marker%3e%3c/defs%3e%3cg class=&#x27;root&#x27;%3e%3cg class=&#x27;clusters&#x27;/%3e%3cg class=&#x27;edgePaths&#x27;/%3e%3cg class=&#x27;edgeLabels&#x27;/%3e%3cg class=&#x27;nodes&#x27;%3e%3cg class=&#x27;node default&#x27; id=&#x27;classId-Dummy-0&#x27; transform=&#x27;translate(49.34375%2c 50)&#x27;%3e%3cg class=&#x27;basic label-container&#x27;%3e%3cpath d=&#x27;M-41.34375 -42 L41.34375 -42 L41.34375 42 L-41.34375 42&#x27; stroke=&#x27;none&#x27; stroke-width=&#x27;0&#x27; fill=&#x27;%23ECECFF&#x27; style=&#x27;&#x27;/%3e%3cpath d=&#x27;M-41.34375 -42 C-18.47052808776501 -42%2c 4.402693824469978 -42%2c 41.34375 -42 M-41.34375 -42 C-11.638484248556278 -42%2c 18.066781502887444 -42%2c 41.34375 -42 M41.34375 -42 C41.34375 -10.17669660006695%2c 41.34375 21.6466067998661%2c 41.34375 42 M41.34375 -42 C41.34375 -23.42333500985683%2c 41.34375 -4.846670019713663%2c 41.34375 42 M41.34375 42 C18.23923199762219 42%2c -4.8652860047556175 42%2c -41.34375 42 M41.34375 42 C10.514502067349259 42%2c -20.314745865301482 42%2c -41.34375 42 M-41.34375 42 C-41.34375 15.89973450187572%2c -41.34375 -10.20053099624856%2c -41.34375 -42 M-41.34375 42 C-41.34375 9.491168184583401%2c -41.34375 -23.017663630833198%2c -41.34375 -42&#x27; stroke=&#x27;%239370DB&#x27; stroke-width=&#x27;1.3&#x27; fill=&#x27;none&#x27; stroke-dasharray=&#x27;0 0&#x27; style=&#x27;&#x27;/%3e%3c/g%3e%3cg class=&#x27;annotation-group text&#x27; transform=&#x27;translate(0%2c -18)&#x27;/%3e%3cg class=&#x27;label-group text&#x27; transform=&#x27;translate(-29.34375%2c -18)&#x27;%3e%3cg class=&#x27;label&#x27; style=&#x27;font-weight: bolder&#x27; transform=&#x27;translate(0%2c-12)&#x27;%3e%3cforeignObject width=&#x27;58.6875&#x27; height=&#x27;24&#x27;%3e%3cdiv xmlns=&#x27;http://www.w3.org/1999/xhtml&#x27; style=&#x27;display: table-cell%3b white-space: nowrap%3b line-height: 1.5%3b max-width: 105px%3b text-align: center%3b&#x27;%3e%3cspan class=&#x27;nodeLabel markdown-node-label&#x27; style=&#x27;&#x27;%3e%3cp%3eDummy%3c/p%3e%3c/span%3e%3c/div%3e%3c/foreignObject%3e%3c/g%3e%3c/g%3e%3cg class=&#x27;members-group text&#x27; transform=&#x27;translate(-29.34375%2c 30)&#x27;/%3e%3cg class=&#x27;methods-group text&#x27; transform=&#x27;translate(-29.34375%2c 60)&#x27;/%3e%3cg class=&#x27;divider&#x27; style=&#x27;&#x27;%3e%3cpath d=&#x27;M-41.34375 6 C-21.792333307060606 6%2c -2.240916614121211 6%2c 41.34375 6 M-41.34375 6 C-12.216985956281384 6%2c 16.909778087437232 6%2c 41.34375 6&#x27; stroke=&#x27;%239370DB&#x27; stroke-width=&#x27;1.3&#x27; fill=&#x27;none&#x27; stroke-dasharray=&#x27;0 0&#x27; style=&#x27;&#x27;/%3e%3c/g%3e%3cg class=&#x27;divider&#x27; style=&#x27;&#x27;%3e%3cpath d=&#x27;M-41.34375 24 C-11.200702294474844 24%2c 18.94234541105031 24%2c 41.34375 24 M-41.34375 24 C-8.627276495242931 24%2c 24.089197009514137 24%2c 41.34375 24&#x27; stroke=&#x27;%239370DB&#x27; stroke-width=&#x27;1.3&#x27; fill=&#x27;none&#x27; stroke-dasharray=&#x27;0 0&#x27; style=&#x27;&#x27;/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e" width="98.6875">
<p>We can use the Prototype pattern to reduce the number of classes even further. We have separate classes for whole notes and half notes, but that’s probably unnecessary. Instead they could be instances of the same class initialized with different bitmaps and durations. A tool for creating whole notes becomes just a GraphicTool whose prototype is a MusicalNote initialized to be a whole note. This can reduce the number of classes in the system dramatically. It also makes it easier to add a new kind of note to the music editor.</p>
<div class="sl-heading-wrapper level-h2"><h2 id="applicability">Applicability</h2><a class="sl-anchor-link" href="#applicability"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Applicability”</span></a></div>
<p>Use the Prototype pattern when a system should be independent of how its products are created, composed, and represented; and</p>
<ul>
<li>when the classes to instantiate are specified at run-time, for example, by dynamic loading; or</li>
<li>to avoid building a class hierarchy of factories that parallels the class hierarchy of products; or</li>
<li>when instances of a class can have one of only a few different combinations of state. It may be more convenient to install a corresponding number of prototypes and clone them rather than instantiating the class manually, each time with the appropriate state.</li>
</ul>
<div class="sl-heading-wrapper level-h2"><h2 id="structure">Structure</h2><a class="sl-anchor-link" href="#structure"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Structure”</span></a></div>
<img alt="" height="100" id="mermaid-1" src="data:image/svg+xml,%3csvg id=&#x27;mermaid-1&#x27; width=&#x27;100%25&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; xmlns:xlink=&#x27;http://www.w3.org/1999/xlink&#x27; class=&#x27;classDiagram&#x27; style=&#x27;max-width: 98.6875px%3b&#x27; viewBox=&#x27;0 0 98.6875 100&#x27; role=&#x27;graphics-document document&#x27; aria-roledescription=&#x27;class&#x27;%3e%3cstyle%3e%23mermaid-1%7bfont-family:arial%2csans-serif%3bfont-size:16px%3bfill:%23333%3b%7d%40keyframes edge-animation-frame%7bfrom%7bstroke-dashoffset:0%3b%7d%7d%40keyframes dash%7bto%7bstroke-dashoffset:0%3b%7d%7d%23mermaid-1 .edge-animation-slow%7bstroke-dasharray:9%2c5!important%3bstroke-dashoffset:900%3banimation:dash 50s linear infinite%3bstroke-linecap:round%3b%7d%23mermaid-1 .edge-animation-fast%7bstroke-dasharray:9%2c5!important%3bstroke-dashoffset:900%3banimation:dash 20s linear infinite%3bstroke-linecap:round%3b%7d%23mermaid-1 .error-icon%7bfill:%23552222%3b%7d%23mermaid-1 .error-text%7bfill:%23552222%3bstroke:%23552222%3b%7d%23mermaid-1 .edge-thickness-normal%7bstroke-width:1px%3b%7d%23mermaid-1 .edge-thickness-thick%7bstroke-width:3.5px%3b%7d%23mermaid-1 .edge-pattern-solid%7bstroke-dasharray:0%3b%7d%23mermaid-1 .edge-thickness-invisible%7bstroke-width:0%3bfill:none%3b%7d%23mermaid-1 .edge-pattern-dashed%7bstroke-dasharray:3%3b%7d%23mermaid-1 .edge-pattern-dotted%7bstroke-dasharray:2%3b%7d%23mermaid-1 .marker%7bfill:%23333333%3bstroke:%23333333%3b%7d%23mermaid-1 .marker.cross%7bstroke:%23333333%3b%7d%23mermaid-1 svg%7bfont-family:arial%2csans-serif%3bfont-size:16px%3b%7d%23mermaid-1 p%7bmargin:0%3b%7d%23mermaid-1 g.classGroup text%7bfill:%239370DB%3bstroke:none%3bfont-family:arial%2csans-serif%3bfont-size:10px%3b%7d%23mermaid-1 g.classGroup text .title%7bfont-weight:bolder%3b%7d%23mermaid-1 .nodeLabel%2c%23mermaid-1 .edgeLabel%7bcolor:%23131300%3b%7d%23mermaid-1 .edgeLabel .label rect%7bfill:%23ECECFF%3b%7d%23mermaid-1 .label text%7bfill:%23131300%3b%7d%23mermaid-1 .labelBkg%7bbackground:%23ECECFF%3b%7d%23mermaid-1 .edgeLabel .label span%7bbackground:%23ECECFF%3b%7d%23mermaid-1 .classTitle%7bfont-weight:bolder%3b%7d%23mermaid-1 .node rect%2c%23mermaid-1 .node circle%2c%23mermaid-1 .node ellipse%2c%23mermaid-1 .node polygon%2c%23mermaid-1 .node path%7bfill:%23ECECFF%3bstroke:%239370DB%3bstroke-width:1px%3b%7d%23mermaid-1 .divider%7bstroke:%239370DB%3bstroke-width:1%3b%7d%23mermaid-1 g.clickable%7bcursor:pointer%3b%7d%23mermaid-1 g.classGroup rect%7bfill:%23ECECFF%3bstroke:%239370DB%3b%7d%23mermaid-1 g.classGroup line%7bstroke:%239370DB%3bstroke-width:1%3b%7d%23mermaid-1 .classLabel .box%7bstroke:none%3bstroke-width:0%3bfill:%23ECECFF%3bopacity:0.5%3b%7d%23mermaid-1 .classLabel .label%7bfill:%239370DB%3bfont-size:10px%3b%7d%23mermaid-1 .relation%7bstroke:%23333333%3bstroke-width:1%3bfill:none%3b%7d%23mermaid-1 .dashed-line%7bstroke-dasharray:3%3b%7d%23mermaid-1 .dotted-line%7bstroke-dasharray:1 2%3b%7d%23mermaid-1 %23compositionStart%2c%23mermaid-1 .composition%7bfill:%23333333!important%3bstroke:%23333333!important%3bstroke-width:1%3b%7d%23mermaid-1 %23compositionEnd%2c%23mermaid-1 .composition%7bfill:%23333333!important%3bstroke:%23333333!important%3bstroke-width:1%3b%7d%23mermaid-1 %23dependencyStart%2c%23mermaid-1 .dependency%7bfill:%23333333!important%3bstroke:%23333333!important%3bstroke-width:1%3b%7d%23mermaid-1 %23dependencyStart%2c%23mermaid-1 .dependency%7bfill:%23333333!important%3bstroke:%23333333!important%3bstroke-width:1%3b%7d%23mermaid-1 %23extensionStart%2c%23mermaid-1 .extension%7bfill:transparent!important%3bstroke:%23333333!important%3bstroke-width:1%3b%7d%23mermaid-1 %23extensionEnd%2c%23mermaid-1 .extension%7bfill:transparent!important%3bstroke:%23333333!important%3bstroke-width:1%3b%7d%23mermaid-1 %23aggregationStart%2c%23mermaid-1 .aggregation%7bfill:transparent!important%3bstroke:%23333333!important%3bstroke-width:1%3b%7d%23mermaid-1 %23aggregationEnd%2c%23mermaid-1 .aggregation%7bfill:transparent!important%3bstroke:%23333333!important%3bstroke-width:1%3b%7d%23mermaid-1 %23lollipopStart%2c%23mermaid-1 .lollipop%7bfill:%23ECECFF!important%3bstroke:%23333333!important%3bstroke-width:1%3b%7d%23mermaid-1 %23lollipopEnd%2c%23mermaid-1 .lollipop%7bfill:%23ECECFF!important%3bstroke:%23333333!important%3bstroke-width:1%3b%7d%23mermaid-1 .edgeTerminals%7bfont-size:11px%3bline-height:initial%3b%7d%23mermaid-1 .classTitleText%7btext-anchor:middle%3bfont-size:18px%3bfill:%23333%3b%7d%23mermaid-1 .label-icon%7bdisplay:inline-block%3bheight:1em%3boverflow:visible%3bvertical-align:-0.125em%3b%7d%23mermaid-1 .node .label-icon path%7bfill:currentColor%3bstroke:revert%3bstroke-width:revert%3b%7d%23mermaid-1 :root%7b--mermaid-font-family:arial%2csans-serif%3b%7d%3c/style%3e%3cg%3e%3cdefs%3e%3cmarker id=&#x27;mermaid-1_class-aggregationStart&#x27; class=&#x27;marker aggregation class&#x27; refX=&#x27;18&#x27; refY=&#x27;7&#x27; markerWidth=&#x27;190&#x27; markerHeight=&#x27;240&#x27; orient=&#x27;auto&#x27;%3e%3cpath d=&#x27;M 18%2c7 L9%2c13 L1%2c7 L9%2c1 Z&#x27;/%3e%3c/marker%3e%3c/defs%3e%3cdefs%3e%3cmarker id=&#x27;mermaid-1_class-aggregationEnd&#x27; class=&#x27;marker aggregation class&#x27; refX=&#x27;1&#x27; refY=&#x27;7&#x27; markerWidth=&#x27;20&#x27; markerHeight=&#x27;28&#x27; orient=&#x27;auto&#x27;%3e%3cpath d=&#x27;M 18%2c7 L9%2c13 L1%2c7 L9%2c1 Z&#x27;/%3e%3c/marker%3e%3c/defs%3e%3cdefs%3e%3cmarker id=&#x27;mermaid-1_class-extensionStart&#x27; class=&#x27;marker extension class&#x27; refX=&#x27;18&#x27; refY=&#x27;7&#x27; markerWidth=&#x27;190&#x27; markerHeight=&#x27;240&#x27; orient=&#x27;auto&#x27;%3e%3cpath d=&#x27;M 1%2c7 L18%2c13 V 1 Z&#x27;/%3e%3c/marker%3e%3c/defs%3e%3cdefs%3e%3cmarker id=&#x27;mermaid-1_class-extensionEnd&#x27; class=&#x27;marker extension class&#x27; refX=&#x27;1&#x27; refY=&#x27;7&#x27; markerWidth=&#x27;20&#x27; markerHeight=&#x27;28&#x27; orient=&#x27;auto&#x27;%3e%3cpath d=&#x27;M 1%2c1 V 13 L18%2c7 Z&#x27;/%3e%3c/marker%3e%3c/defs%3e%3cdefs%3e%3cmarker id=&#x27;mermaid-1_class-compositionStart&#x27; class=&#x27;marker composition class&#x27; refX=&#x27;18&#x27; refY=&#x27;7&#x27; markerWidth=&#x27;190&#x27; markerHeight=&#x27;240&#x27; orient=&#x27;auto&#x27;%3e%3cpath d=&#x27;M 18%2c7 L9%2c13 L1%2c7 L9%2c1 Z&#x27;/%3e%3c/marker%3e%3c/defs%3e%3cdefs%3e%3cmarker id=&#x27;mermaid-1_class-compositionEnd&#x27; class=&#x27;marker composition class&#x27; refX=&#x27;1&#x27; refY=&#x27;7&#x27; markerWidth=&#x27;20&#x27; markerHeight=&#x27;28&#x27; orient=&#x27;auto&#x27;%3e%3cpath d=&#x27;M 18%2c7 L9%2c13 L1%2c7 L9%2c1 Z&#x27;/%3e%3c/marker%3e%3c/defs%3e%3cdefs%3e%3cmarker id=&#x27;mermaid-1_class-dependencyStart&#x27; class=&#x27;marker dependency class&#x27; refX=&#x27;6&#x27; refY=&#x27;7&#x27; markerWidth=&#x27;190&#x27; markerHeight=&#x27;240&#x27; orient=&#x27;auto&#x27;%3e%3cpath d=&#x27;M 5%2c7 L9%2c13 L1%2c7 L9%2c1 Z&#x27;/%3e%3c/marker%3e%3c/defs%3e%3cdefs%3e%3cmarker id=&#x27;mermaid-1_class-dependencyEnd&#x27; class=&#x27;marker dependency class&#x27; refX=&#x27;13&#x27; refY=&#x27;7&#x27; markerWidth=&#x27;20&#x27; markerHeight=&#x27;28&#x27; orient=&#x27;auto&#x27;%3e%3cpath d=&#x27;M 18%2c7 L9%2c13 L14%2c7 L9%2c1 Z&#x27;/%3e%3c/marker%3e%3c/defs%3e%3cdefs%3e%3cmarker id=&#x27;mermaid-1_class-lollipopStart&#x27; class=&#x27;marker lollipop class&#x27; refX=&#x27;13&#x27; refY=&#x27;7&#x27; markerWidth=&#x27;190&#x27; markerHeight=&#x27;240&#x27; orient=&#x27;auto&#x27;%3e%3ccircle stroke=&#x27;black&#x27; fill=&#x27;transparent&#x27; cx=&#x27;7&#x27; cy=&#x27;7&#x27; r=&#x27;6&#x27;/%3e%3c/marker%3e%3c/defs%3e%3cdefs%3e%3cmarker id=&#x27;mermaid-1_class-lollipopEnd&#x27; class=&#x27;marker lollipop class&#x27; refX=&#x27;1&#x27; refY=&#x27;7&#x27; markerWidth=&#x27;190&#x27; markerHeight=&#x27;240&#x27; orient=&#x27;auto&#x27;%3e%3ccircle stroke=&#x27;black&#x27; fill=&#x27;transparent&#x27; cx=&#x27;7&#x27; cy=&#x27;7&#x27; r=&#x27;6&#x27;/%3e%3c/marker%3e%3c/defs%3e%3cg class=&#x27;root&#x27;%3e%3cg class=&#x27;clusters&#x27;/%3e%3cg class=&#x27;edgePaths&#x27;/%3e%3cg class=&#x27;edgeLabels&#x27;/%3e%3cg class=&#x27;nodes&#x27;%3e%3cg class=&#x27;node default&#x27; id=&#x27;classId-Dummy-1&#x27; transform=&#x27;translate(49.34375%2c 50)&#x27;%3e%3cg class=&#x27;basic label-container&#x27;%3e%3cpath d=&#x27;M-41.34375 -42 L41.34375 -42 L41.34375 42 L-41.34375 42&#x27; stroke=&#x27;none&#x27; stroke-width=&#x27;0&#x27; fill=&#x27;%23ECECFF&#x27; style=&#x27;&#x27;/%3e%3cpath d=&#x27;M-41.34375 -42 C-14.682745981506475 -42%2c 11.97825803698705 -42%2c 41.34375 -42 M-41.34375 -42 C-19.629331156371133 -42%2c 2.085087687257733 -42%2c 41.34375 -42 M41.34375 -42 C41.34375 -9.079225945651231%2c 41.34375 23.841548108697538%2c 41.34375 42 M41.34375 -42 C41.34375 -21.38637274664004%2c 41.34375 -0.7727454932800768%2c 41.34375 42 M41.34375 42 C24.44881435329589 42%2c 7.553878706591782 42%2c -41.34375 42 M41.34375 42 C18.81114385397944 42%2c -3.7214622920411173 42%2c -41.34375 42 M-41.34375 42 C-41.34375 24.440750492241044%2c -41.34375 6.881500984482088%2c -41.34375 -42 M-41.34375 42 C-41.34375 20.410532809060427%2c -41.34375 -1.1789343818791451%2c -41.34375 -42&#x27; stroke=&#x27;%239370DB&#x27; stroke-width=&#x27;1.3&#x27; fill=&#x27;none&#x27; stroke-dasharray=&#x27;0 0&#x27; style=&#x27;&#x27;/%3e%3c/g%3e%3cg class=&#x27;annotation-group text&#x27; transform=&#x27;translate(0%2c -18)&#x27;/%3e%3cg class=&#x27;label-group text&#x27; transform=&#x27;translate(-29.34375%2c -18)&#x27;%3e%3cg class=&#x27;label&#x27; style=&#x27;font-weight: bolder&#x27; transform=&#x27;translate(0%2c-12)&#x27;%3e%3cforeignObject width=&#x27;58.6875&#x27; height=&#x27;24&#x27;%3e%3cdiv xmlns=&#x27;http://www.w3.org/1999/xhtml&#x27; style=&#x27;display: table-cell%3b white-space: nowrap%3b line-height: 1.5%3b max-width: 105px%3b text-align: center%3b&#x27;%3e%3cspan class=&#x27;nodeLabel markdown-node-label&#x27; style=&#x27;&#x27;%3e%3cp%3eDummy%3c/p%3e%3c/span%3e%3c/div%3e%3c/foreignObject%3e%3c/g%3e%3c/g%3e%3cg class=&#x27;members-group text&#x27; transform=&#x27;translate(-29.34375%2c 30)&#x27;/%3e%3cg class=&#x27;methods-group text&#x27; transform=&#x27;translate(-29.34375%2c 60)&#x27;/%3e%3cg class=&#x27;divider&#x27; style=&#x27;&#x27;%3e%3cpath d=&#x27;M-41.34375 6 C-19.34235090392662 6%2c 2.659048192146763 6%2c 41.34375 6 M-41.34375 6 C-11.727828122900853 6%2c 17.888093754198295 6%2c 41.34375 6&#x27; stroke=&#x27;%239370DB&#x27; stroke-width=&#x27;1.3&#x27; fill=&#x27;none&#x27; stroke-dasharray=&#x27;0 0&#x27; style=&#x27;&#x27;/%3e%3c/g%3e%3cg class=&#x27;divider&#x27; style=&#x27;&#x27;%3e%3cpath d=&#x27;M-41.34375 24 C-15.963953664944665 24%2c 9.41584267011067 24%2c 41.34375 24 M-41.34375 24 C-20.184039939865524 24%2c 0.9756701202689513 24%2c 41.34375 24&#x27; stroke=&#x27;%239370DB&#x27; stroke-width=&#x27;1.3&#x27; fill=&#x27;none&#x27; stroke-dasharray=&#x27;0 0&#x27; style=&#x27;&#x27;/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e" width="98.6875">
<div class="sl-heading-wrapper level-h2"><h2 id="participants">Participants</h2><a class="sl-anchor-link" href="#participants"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Participants”</span></a></div>
<ul>
<li><strong>Prototype</strong> (Graphic)
<ul>
<li>declares an interface for cloning itself.</li>
</ul>
</li>
<li><strong>ConcretePrototype</strong> (Staff, WholeNote, HalfNote)
<ul>
<li>implements an operation for cloning itself.</li>
</ul>
</li>
<li><strong>Client</strong> (GraphicTool)
<ul>
<li>creates a new object by asking a prototype to clone itself.</li>
</ul>
</li>
</ul>
<div class="sl-heading-wrapper level-h2"><h2 id="collaborations">Collaborations</h2><a class="sl-anchor-link" href="#collaborations"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Collaborations”</span></a></div>
<ul>
<li>A client asks a prototype to clone itself.</li>
</ul>
<div class="sl-heading-wrapper level-h2"><h2 id="consequences">Consequences</h2><a class="sl-anchor-link" href="#consequences"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Consequences”</span></a></div>
<p>Prototype has many of the same consequences that Abstract Factory (87) and Builder (97) have: It hides the concrete product classes from the client, thereby reducing the number of names clients know about. Moreover, these patterns let a client work with application-specific classes without modification.</p>
<p>Additional benefits of the Prototype pattern are listed below.</p>
<ol>
<li>
<p>Adding and removing products at run-time. Prototypes let you incorporate a new concrete product class into a system simply by registering a prototypical instance with the client. That’s a bit more flexible than other creational patterns, because a client can install and remove prototypes at run-time.</p>
</li>
<li>
<p>Specifying new objects by varying values. Highly dynamic systems let you define new behavior through object composition—by specifying values for an object’s variables, for example—and not by defining new classes. You effectively define new kinds of objects by instantiating existing classes and registering the instances as prototypes of client objects. A client can exhibit new behavior by delegating responsibility to the prototype.</p>
<p>This kind of design lets users define new “classes” without programming. In fact, cloning a prototype is similar to instantiating a class. The Prototype pattern can greatly reduce the number of classes a system needs. In our music editor, one GraphicTool class can create a limitless variety of music objects.</p>
</li>
<li>
<p>Specifying new objects by varying structure. Many applications build objects from parts and subparts. Editors for circuit design, for example, build circuits out of subcircuits.1 For convenience, such applications often let you instantiate complex, user-defined structures, say, to use a specific subcircuit again and again.</p>
<p>The Prototype pattern supports this as well. We simply add this subcircuit as a prototype to the palette of available circuit elements. As long as the composite circuit object implements Clone as a deep copy, circuits with different structures can be prototypes.</p>
</li>
<li>
<p>Reduced subclassing. Factory Method (107) often produces a hierarchy of Creator classes that parallels the product class hierarchy. The Prototype pattern lets you clone a prototype instead of asking a factory method to make a new object. Hence you don’t need a Creator class hierarchy at all. This benefit applies primarily to languages like C++ that don’t treat classes as first-class objects. Languages that do, like Smalltalk and Objective C, derive less benefit, since you can always use a class object as a creator. Class objects already act like prototypes in these languages.</p>
</li>
<li>
<p>Configuring an application with classes dynamically. Some run-time environments let you load classes into an application dynamically. The Prototype pattern is the key to exploiting such facilities in a language like C++.</p>
</li>
</ol>
<p>An application that wants to create instances of a dynamically loaded class won’t be able to reference its constructor statically. Instead, the run-time environment creates an instance of each class automatically when it’s loaded, and it registers the instance with a prototype manager (see the Implementation section). Then the application can ask the prototype manager for instances of newly loaded classes, classes that weren’t linked with the program originally. The ET++ application framework [WGM88] has a run-time system that uses this scheme.</p>
<p>The main liability of the Prototype pattern is that each subclass of Prototype must implement the Clone operation, which may be difficult. For example, adding Clone is difficult when the classes under consideration already exist. Implementing Clone can be difficult when their internals include objects that don’t support copying or have circular references.</p>
<div class="sl-heading-wrapper level-h2"><h2 id="implementation">Implementation</h2><a class="sl-anchor-link" href="#implementation"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Implementation”</span></a></div>
<p>Prototype is particularly useful with static languages like C++, where classes are not objects, and little or no type information is available at run-time. It’s less important in languages like Smalltalk or Objective C that provide what amounts to a prototype (i.e., a class object) for creating instances of each class. This pattern is built into prototype-based languages like Self [US87], in which all object creation happens by cloning a prototype.</p>
<p>Consider the following issues when implementing prototypes:</p>
<ol>
<li>
<p>Using a prototype manager. When the number of prototypes in a system isn’t fixed (that is, they can be created and destroyed dynamically), keep a registry of available prototypes. Clients won’t manage prototypes themselves but will store and retrieve them from the registry. A client will ask the registry for a prototype before cloning it. We call this registry a prototype manager.</p>
<p>A prototype manager is an associative store that returns the prototype matching a given key. It has operations for registering a prototype under a key and for unregistering it. Clients can change or even browse through the registry at run-time. This lets clients extend and take inventory on the system without writing code.</p>
</li>
<li>
<p>Implementing the Clone operation. The hardest part of the Prototype pattern is implementing the Clone operation correctly. It’s particularly tricky when object structures contain circular references.</p>
<p>Most languages provide some support for cloning objects. For example, Smalltalk provides an implementation of copy that’s inherited by all subclasses of Object. C++ provides a copy constructor. But these facilities don’t solve the “shallow copy versus deep copy” problem [GR83]. That is, does cloning an object in turn clone its instance variables, or do the clone and original just share the variables?</p>
<p>A shallow copy is simple and often sufficient, and that’s what Smalltalk provides by default. The default copy constructor in C++ does a memberwise copy, which means pointers will be shared between the copy and the original. But cloning prototypes with complex structures usually requires a deep copy, because the clone and the original must be independent. Therefore you must ensure that the clone’s components are clones of the prototype’s components. Cloning forces you to decide what if anything will be shared.</p>
<p>If objects in the system provide Save and Load operations, then you can use them to provide a default implementation of Clone simply by saving the object and loading it back immediately. The Save operation saves the object into a memory buffer, and Load creates a duplicate by reconstructing the object from the buffer.</p>
</li>
<li>
<p>Initializing clones. While some clients are perfectly happy with the clone as is, others will want to initialize some or all of its internal state to values of their choosing. You generally can’t pass these values in the Clone operation, because their number will vary between classes of prototypes. Some prototypes might need multiple initialization parameters; others won’t need any. Passing parameters in the Clone operation precludes a uniform cloning interface.</p>
<p>It might be the case that your prototype classes already define operations for (re)setting key pieces of state. If so, clients may use these operations immediately after cloning. If not, then you may have to introduce an Initialize operation (see the Sample Code section) that takes initialization parameters as arguments and sets the clone’s internal state accordingly. Beware of deep-copying Clone operations—the copies may have to be deleted (either explicitly or within Initialize) before you reinitialize them.</p>
</li>
</ol>
<div class="sl-heading-wrapper level-h2"><h2 id="sample-code">Sample Code</h2><a class="sl-anchor-link" href="#sample-code"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Sample Code”</span></a></div>
<p>We’ll define a MazePrototypeFactory subclass of the MazeFactory class (page 92). MazePrototypeFactory will be initialized with prototypes of the objects it will create so that we don’t have to subclass it just to change the classes of walls or rooms it creates.</p>
<p>MazePrototypeFactory augments the MazeFactory interface with a constructor that takes the prototypes as arguments:</p>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.v4551.css"><script type="module" src="/_astro/ec.0vx5m.js"></script><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="cpp"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">#ifdef</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">SampleCode1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">#include</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">C++/MazeGame.H</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">#include</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">C++/MazeFactory.H</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">#include</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">C++/MazeParts.H</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="#ifdef SampleCode1#include &#x22;C++/MazeGame.H&#x22;#include &#x22;C++/MazeFactory.H&#x22;#include &#x22;C++/MazeParts.H&#x22;"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="cpp"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">class</span><span style="--0:#D6DEEB;--1:#403F53"> MazePrototypeFactory : </span><span style="--0:#C792EA;--1:#8844AE">public</span><span style="--0:#D6DEEB;--1:#403F53"> MazeFactory {</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">public:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3B61B0">MazePrototypeFactory</span><span style="--0:#D6DEEB;--1:#403F53">(Maze</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53">, Wall</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53">, Room</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53">, Door</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">virtual</span><span style="--0:#D6DEEB;--1:#403F53"> Maze</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">MakeMaze</span><span style="--0:#D6DEEB;--1:#403F53">() </span><span style="--0:#C792EA;--1:#8844AE">const</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">virtual</span><span style="--0:#D6DEEB;--1:#403F53"> Room</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">MakeRoom</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C792EA;--1:#8844AE">int</span><span style="--0:#D6DEEB;--1:#403F53">) </span><span style="--0:#C792EA;--1:#8844AE">const</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">virtual</span><span style="--0:#D6DEEB;--1:#403F53"> Wall</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">MakeWall</span><span style="--0:#D6DEEB;--1:#403F53">() </span><span style="--0:#C792EA;--1:#8844AE">const</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">virtual</span><span style="--0:#D6DEEB;--1:#403F53"> Door</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">MakeDoor</span><span style="--0:#D6DEEB;--1:#403F53">(Room</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53">, Room</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53">) </span><span style="--0:#C792EA;--1:#8844AE">const</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">private:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">Maze</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53"> _prototypeMaze;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">Room</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53"> _prototypeRoom;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">Wall</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53"> _prototypeWall;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">Door</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53"> _prototypeDoor;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">};</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="class MazePrototypeFactory : public MazeFactory {public:    MazePrototypeFactory(Maze*, Wall*, Room*, Door*);    virtual Maze* MakeMaze() const;    virtual Room* MakeRoom(int) const;    virtual Wall* MakeWall() const;    virtual Door* MakeDoor(Room*, Room*) const;private:    Maze* _prototypeMaze;    Room* _prototypeRoom;    Wall* _prototypeWall;    Door* _prototypeDoor;};"><div></div></button></div></figure></div>
<p>The new constructor simply initializes its prototypes:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="cpp"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">MazePrototypeFactory::</span><span style="--0:#82AAFF;--1:#3B61B0">MazePrototypeFactory</span><span style="--0:#D6DEEB;--1:#403F53"> (</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">Maze</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53"> m, Wall</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53"> w, Room</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53"> r, Door</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53"> d</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">   </span></span><span style="--0:#D6DEEB;--1:#403F53">_prototypeMaze </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> m;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">   </span></span><span style="--0:#D6DEEB;--1:#403F53">_prototypeWall </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> w;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">   </span></span><span style="--0:#D6DEEB;--1:#403F53">_prototypeRoom </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> r;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">   </span></span><span style="--0:#D6DEEB;--1:#403F53">_prototypeDoor </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> d;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="MazePrototypeFactory::MazePrototypeFactory (    Maze* m, Wall* w, Room* r, Door* d) {   _prototypeMaze = m;   _prototypeWall = w;   _prototypeRoom = r;   _prototypeDoor = d;}"><div></div></button></div></figure></div>
<p>The member functions for creating walls, rooms, and doors are similar: Each clones a prototype and then initializes it. Here are the definitions of MakeWall and MakeDoor:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="cpp"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">Wall</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53"> MazePrototypeFactory::</span><span style="--0:#82AAFF;--1:#3B61B0">MakeWall</span><span style="--0:#D6DEEB;--1:#403F53"> () </span><span style="--0:#C792EA;--1:#8844AE">const</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3B61B0">_prototypeWall</span><span style="--0:#D6DEEB;--1:#403F53">-></span><span style="--0:#82AAFF;--1:#3B61B0">Clone</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">Door</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53"> MazePrototypeFactory::</span><span style="--0:#82AAFF;--1:#3B61B0">MakeDoor</span><span style="--0:#D6DEEB;--1:#403F53"> (Room</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--1:#403F53"><span style="--0:#D6DEEB"> </span><span style="--0:#D7DBE0">r1</span><span style="--0:#D6DEEB">, Room </span></span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--1:#403F53"><span style="--0:#D7DBE0">r2</span><span style="--0:#D6DEEB">) </span></span><span style="--0:#C792EA;--1:#8844AE">const</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">Door</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53"> door </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3B61B0">_prototypeDoor</span><span style="--0:#D6DEEB;--1:#403F53">-></span><span style="--0:#82AAFF;--1:#3B61B0">Clone</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C5E478;--1:#3B61B0">door</span><span style="--0:#D6DEEB;--1:#403F53">-></span><span style="--0:#82AAFF;--1:#3B61B0">Initialize</span><span style="--0:#D6DEEB;--1:#403F53">(r1, r2);</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53"> door;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="Wall* MazePrototypeFactory::MakeWall () const {    return _prototypeWall->Clone();}Door* MazePrototypeFactory::MakeDoor (Room* r1, Room *r2) const {    Door* door = _prototypeDoor->Clone();    door->Initialize(r1, r2);    return door;}"><div></div></button></div></figure></div>
<p>We can use MazePrototypeFactory to create a prototypical or default maze just by initializing it with prototypes of basic maze components:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="cpp"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">void</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">dummy</span><span style="--0:#D6DEEB;--1:#403F53"> () {</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="void dummy () {"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="cpp"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">MazeGame game;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">MazePrototypeFactory </span><span style="--0:#82AAFF;--1:#3B61B0">simpleMazeFactory</span><span style="--0:#D6DEEB;--1:#403F53">(</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#096E72">new</span><span style="--1:#403F53"><span style="--0:#D6DEEB"> </span><span style="--0:#D7DBE0">Maze</span><span style="--0:#D6DEEB">, </span></span><span style="--0:#7FDBCA;--1:#096E72">new</span><span style="--1:#403F53"><span style="--0:#D6DEEB"> </span><span style="--0:#D7DBE0">Wall</span><span style="--0:#D6DEEB">, </span></span><span style="--0:#7FDBCA;--1:#096E72">new</span><span style="--1:#403F53"><span style="--0:#D6DEEB"> </span><span style="--0:#D7DBE0">Room</span><span style="--0:#D6DEEB">, </span></span><span style="--0:#7FDBCA;--1:#096E72">new</span><span style="--1:#403F53"><span style="--0:#D6DEEB"> </span><span style="--0:#D7DBE0">Door</span></span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">Maze</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53"> maze </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3B61B0">game</span><span style="--0:#D6DEEB;--1:#403F53">.</span><span style="--0:#82AAFF;--1:#3B61B0">CreateMaze</span><span style="--0:#D6DEEB;--1:#403F53">(simpleMazeFactory);</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="MazeGame game;MazePrototypeFactory simpleMazeFactory(    new Maze, new Wall, new Room, new Door);Maze* maze = game.CreateMaze(simpleMazeFactory);"><div></div></button></div></figure></div>
<p>To change the type of maze, we initialize MazePrototypeFactory with a different set of prototypes. The following call creates a maze with a BombedDoor and a RoomWithABomb:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="cpp"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">void</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">dummy2</span><span style="--0:#D6DEEB;--1:#403F53"> () {</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="void dummy2 () {"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="cpp"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">MazePrototypeFactory </span><span style="--0:#82AAFF;--1:#3B61B0">bombedMazeFactory</span><span style="--0:#D6DEEB;--1:#403F53">(</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#096E72">new</span><span style="--1:#403F53"><span style="--0:#D6DEEB"> </span><span style="--0:#D7DBE0">Maze</span><span style="--0:#D6DEEB">, </span></span><span style="--0:#7FDBCA;--1:#096E72">new</span><span style="--1:#403F53"><span style="--0:#D6DEEB"> </span><span style="--0:#D7DBE0">BombedWall</span><span style="--0:#D6DEEB">,</span></span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#096E72">new</span><span style="--1:#403F53"><span style="--0:#D6DEEB"> </span><span style="--0:#D7DBE0">RoomWithABomb</span><span style="--0:#D6DEEB">, </span></span><span style="--0:#7FDBCA;--1:#096E72">new</span><span style="--1:#403F53"><span style="--0:#D6DEEB"> </span><span style="--0:#D7DBE0">Door</span></span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="MazePrototypeFactory bombedMazeFactory(    new Maze, new BombedWall,    new RoomWithABomb, new Door);"><div></div></button></div></figure></div>
<p>An object that can be used as a prototype, such as an instance of Wall, must support the Clone operation. It must also have a copy constructor for cloning. It may also need a separate operation for reinitializing internal state. We’ll add the Initialize operation to Door to let clients initialize the clone’s rooms.</p>
<p>Compare the following definition of Door to the one on page 83:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="cpp"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">#endif</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">#ifdef</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">SampleCode2</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">#define</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">Door_H</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">#define</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">BombedWall_H</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">#define</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">DoorNeedingSpell_H</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">#include</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">C++/MazeParts.H</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="#endif#ifdef SampleCode2#define Door_H#define BombedWall_H#define DoorNeedingSpell_H#include &#x22;C++/MazeParts.H&#x22;"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="cpp"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">class</span><span style="--0:#D6DEEB;--1:#403F53"> Door : </span><span style="--0:#C792EA;--1:#8844AE">public</span><span style="--0:#D6DEEB;--1:#403F53"> MapSite {</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">public:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3B61B0">Door</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3B61B0">Door</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C792EA;--1:#8844AE">const</span><span style="--0:#D6DEEB;--1:#403F53"> Door</span><span style="--0:#C792EA;--1:#8844AE">&#x26;</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">virtual</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">void</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">Initialize</span><span style="--0:#D6DEEB;--1:#403F53">(Room</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53">, Room</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">virtual</span><span style="--0:#D6DEEB;--1:#403F53"> Door</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">Clone</span><span style="--0:#D6DEEB;--1:#403F53">() </span><span style="--0:#C792EA;--1:#8844AE">const</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">virtual</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">void</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">Enter</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">Room</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">OtherSideFrom</span><span style="--0:#D6DEEB;--1:#403F53">(Room</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">private:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">Room</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53"> _room1;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">Room</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53"> _room2;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">};</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">Door::</span><span style="--0:#82AAFF;--1:#3B61B0">Door</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#C792EA;--1:#8844AE">const</span><span style="--0:#D6DEEB;--1:#403F53"> Door</span><span style="--0:#C792EA;--1:#8844AE">&#x26;</span><span style="--0:#D6DEEB;--1:#403F53"> other) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">_room1 </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3B61B0">other</span><span style="--0:#D6DEEB;--1:#403F53">.</span><span style="--0:#7FDBCA;--1:#096E72">_room1</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">_room2 </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3B61B0">other</span><span style="--0:#D6DEEB;--1:#403F53">.</span><span style="--0:#7FDBCA;--1:#096E72">_room2</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">void</span><span style="--0:#D6DEEB;--1:#403F53"> Door::</span><span style="--0:#82AAFF;--1:#3B61B0">Initialize</span><span style="--0:#D6DEEB;--1:#403F53"> (Room</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--1:#403F53"><span style="--0:#D6DEEB"> </span><span style="--0:#D7DBE0">r1</span><span style="--0:#D6DEEB">, Room</span></span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--1:#403F53"><span style="--0:#D6DEEB"> </span><span style="--0:#D7DBE0">r2</span><span style="--0:#D6DEEB">) {</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">_room1 </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> r1;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">_room2 </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> r2;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">Door</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53"> Door::</span><span style="--0:#82AAFF;--1:#3B61B0">Clone</span><span style="--0:#D6DEEB;--1:#403F53"> () </span><span style="--0:#C792EA;--1:#8844AE">const</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">new</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">Door</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="class Door : public MapSite {public:    Door();    Door(const Door&#x26;);    virtual void Initialize(Room*, Room*);    virtual Door* Clone() const;    virtual void Enter();    Room* OtherSideFrom(Room*);private:    Room* _room1;    Room* _room2;};Door::Door (const Door&#x26; other) {    _room1 = other._room1;    _room2 = other._room2;}void Door::Initialize (Room* r1, Room* r2) {    _room1 = r1;    _room2 = r2;}Door* Door::Clone () const {    return new Door(*this);}"><div></div></button></div></figure></div>
<p>The BombedWall subclass must override Clone and implement a corresponding copy constructor.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="cpp"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">class</span><span style="--0:#D6DEEB;--1:#403F53"> BombedWall : </span><span style="--0:#C792EA;--1:#8844AE">public</span><span style="--0:#D6DEEB;--1:#403F53"> Wall {</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">public:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3B61B0">BombedWall</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3B61B0">BombedWall</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C792EA;--1:#8844AE">const</span><span style="--0:#D6DEEB;--1:#403F53"> BombedWall</span><span style="--0:#C792EA;--1:#8844AE">&#x26;</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">virtual</span><span style="--0:#D6DEEB;--1:#403F53"> Wall</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">Clone</span><span style="--0:#D6DEEB;--1:#403F53">() </span><span style="--0:#C792EA;--1:#8844AE">const</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">bool</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">HasBomb</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">private:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">bool</span><span style="--0:#D6DEEB;--1:#403F53"> _bomb;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">};</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">BombedWall::</span><span style="--0:#82AAFF;--1:#3B61B0">BombedWall</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#C792EA;--1:#8844AE">const</span><span style="--0:#D6DEEB;--1:#403F53"> BombedWall</span><span style="--0:#C792EA;--1:#8844AE">&#x26;</span><span style="--0:#D6DEEB;--1:#403F53"> other) : </span><span style="--0:#82AAFF;--1:#3B61B0">Wall</span><span style="--0:#D6DEEB;--1:#403F53">(other) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">_bomb </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3B61B0">other</span><span style="--0:#D6DEEB;--1:#403F53">.</span><span style="--0:#7FDBCA;--1:#096E72">_bomb</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">Wall</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#D6DEEB;--1:#403F53"> BombedWall::</span><span style="--0:#82AAFF;--1:#3B61B0">Clone</span><span style="--0:#D6DEEB;--1:#403F53"> () </span><span style="--0:#C792EA;--1:#8844AE">const</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#096E72">new</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">BombedWall</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C792EA;--1:#8844AE">*</span><span style="--0:#7FDBCA;--1:#096E72">this</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">```cpp</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">#endif</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="class BombedWall : public Wall {public:    BombedWall();    BombedWall(const BombedWall&#x26;);    virtual Wall* Clone() const;    bool HasBomb();private:    bool _bomb;};BombedWall::BombedWall (const BombedWall&#x26; other) : Wall(other) {    _bomb = other._bomb;}Wall* BombedWall::Clone () const {    return new BombedWall(*this);}&#x60;&#x60;&#x60;cpp#endif"><div></div></button></div></figure></div>
<p>Although BombedWall::Clone returns a Wall*, its implementation returns a pointer to a new instance of a subclass, that is, a BombedWall*. We define Clone like this in the base class to ensure that clients that clone the prototype don’t have to know about their concrete subclasses. Clients should never need to downcast the return value of Clone to the desired type.</p>
<p>In Smalltalk, you can reuse the standard copy method inherited from Object to clone any MapSite. You can use MazeFactory to produce the prototypes you’ll need; for example, you can create a room by supplying the name #room. The MazeFactory has a dictionary that maps names to prototypes. Its make: method looks like this:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="smalltalk"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">make: partName</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">^</span><span style="--0:#D6DEEB;--1:#403F53"> (partCatalog at: partName) copy</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="make: partName^ (partCatalog at: partName) copy"><div></div></button></div></figure></div>
<p>Given appropriate methods for initializing the MazeFactory with prototypes, you could create a simple maze with the following code:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="smalltalk"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">CreateMaze</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">on: (MazeFactory </span><span style="--0:#C792EA;--1:#8844AE">new</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">with: Door </span><span style="--0:#C792EA;--1:#8844AE">new</span><span style="--0:#D6DEEB;--1:#403F53"> named: </span><span style="--0:#82AAFF;--1:#3B61B0">#door</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">with: Wall </span><span style="--0:#C792EA;--1:#8844AE">new</span><span style="--0:#D6DEEB;--1:#403F53"> named: </span><span style="--0:#82AAFF;--1:#3B61B0">#wall</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">http:</span><span style="--0:#C792EA;--1:#8844AE">//</span><span style="--0:#D6DEEB;--1:#403F53">lci.cs.ubbcluj.ro</span><span style="--0:#C792EA;--1:#8844AE">/</span><span style="--0:#D6DEEB;--1:#403F53">~raduking</span><span style="--0:#C792EA;--1:#8844AE">/</span><span style="--0:#D6DEEB;--1:#403F53">Books</span><span style="--0:#C792EA;--1:#8844AE">/</span><span style="--0:#D6DEEB;--1:#403F53">Design%</span><span style="--0:#F78C6C;--1:#AA0982">20</span><span style="--0:#D6DEEB;--1:#403F53">Patterns</span><span style="--0:#C792EA;--1:#8844AE">/</span><span style="--0:#D6DEEB;--1:#403F53">pat3dfs.htm (</span><span style="--0:#F78C6C;--1:#AA0982">6</span><span style="--0:#D6DEEB;--1:#403F53"> of </span><span style="--0:#F78C6C;--1:#AA0982">8</span><span style="--0:#D6DEEB;--1:#403F53">) [</span><span style="--0:#F78C6C;--1:#AA0982">21</span><span style="--0:#C792EA;--1:#8844AE">/</span><span style="--0:#F78C6C;--1:#AA0982">08</span><span style="--0:#C792EA;--1:#8844AE">/</span><span style="--0:#F78C6C;--1:#AA0982">2002</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">19</span><span style="--0:#D6DEEB;--1:#403F53">:</span><span style="--0:#F78C6C;--1:#AA0982">08</span><span style="--0:#D6DEEB;--1:#403F53">:</span><span style="--0:#F78C6C;--1:#AA0982">51</span><span style="--0:#D6DEEB;--1:#403F53">]Prototype</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">with: Room </span><span style="--0:#C792EA;--1:#8844AE">new</span><span style="--0:#D6DEEB;--1:#403F53"> named: </span><span style="--0:#82AAFF;--1:#3B61B0">#room</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8844AE">yourself</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="CreateMaze    on: (MazeFactory new        with: Door new named: #door;        with: Wall new named: #wall;        http://lci.cs.ubbcluj.ro/~raduking/Books/Design%20Patterns/pat3dfs.htm (6 of 8) [21/08/2002 19:08:51]Prototype        with: Room new named: #room;        yourself)"><div></div></button></div></figure></div>
<p>where the definition of the on: class method for CreateMaze would be</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="smalltalk"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">on: aFactory</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">| </span><span style="--0:#C5E478;--1:#3B61B0">room1</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3B61B0">room2</span><span style="--0:#D6DEEB;--1:#403F53"> |</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">room1 </span><span style="--0:#C792EA;--1:#8844AE">:=</span><span style="--0:#D6DEEB;--1:#403F53"> (aFactory make: </span><span style="--0:#82AAFF;--1:#3B61B0">#room</span><span style="--0:#D6DEEB;--1:#403F53">) location: </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#7FDBCA;--1:#096E72">@</span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">.</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">room2 </span><span style="--0:#C792EA;--1:#8844AE">:=</span><span style="--0:#D6DEEB;--1:#403F53"> (aFactory make: </span><span style="--0:#82AAFF;--1:#3B61B0">#room</span><span style="--0:#D6DEEB;--1:#403F53">) location: </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#7FDBCA;--1:#096E72">@</span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">.</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">door </span><span style="--0:#C792EA;--1:#8844AE">:=</span><span style="--0:#D6DEEB;--1:#403F53"> (aFactory make: </span><span style="--0:#82AAFF;--1:#3B61B0">#door</span><span style="--0:#D6DEEB;--1:#403F53">) from: room1 to: room2.</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">room1</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">atSide: </span><span style="--0:#82AAFF;--1:#3B61B0">#north</span><span style="--0:#D6DEEB;--1:#403F53"> put: (aFactory make: </span><span style="--0:#82AAFF;--1:#3B61B0">#wall</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">atSide: </span><span style="--0:#82AAFF;--1:#3B61B0">#east</span><span style="--0:#D6DEEB;--1:#403F53"> put: door;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">atSide: </span><span style="--0:#82AAFF;--1:#3B61B0">#south</span><span style="--0:#D6DEEB;--1:#403F53"> put: (aFactory make: </span><span style="--0:#82AAFF;--1:#3B61B0">#wall</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">atSide: </span><span style="--0:#82AAFF;--1:#3B61B0">#west</span><span style="--0:#D6DEEB;--1:#403F53"> put: (aFactory make: </span><span style="--0:#82AAFF;--1:#3B61B0">#wall</span><span style="--0:#D6DEEB;--1:#403F53">).</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">room2</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">atSide: </span><span style="--0:#82AAFF;--1:#3B61B0">#north</span><span style="--0:#D6DEEB;--1:#403F53"> put: (aFactory make: </span><span style="--0:#82AAFF;--1:#3B61B0">#wall</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">atSide: </span><span style="--0:#82AAFF;--1:#3B61B0">#east</span><span style="--0:#D6DEEB;--1:#403F53"> put: (aFactory make: </span><span style="--0:#82AAFF;--1:#3B61B0">#wall</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">atSide: </span><span style="--0:#82AAFF;--1:#3B61B0">#south</span><span style="--0:#D6DEEB;--1:#403F53"> put: (aFactory make: </span><span style="--0:#82AAFF;--1:#3B61B0">#wall</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">atSide: </span><span style="--0:#82AAFF;--1:#3B61B0">#west</span><span style="--0:#D6DEEB;--1:#403F53"> put: door.</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA;--1:#8844AE">^</span><span style="--0:#D6DEEB;--1:#403F53"> Maze </span><span style="--0:#C792EA;--1:#8844AE">new</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">addRoom: room1;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">addRoom: room2;</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#C792EA;--1:#8844AE">yourself</span></div></div></code></pre><div class="copy"><div aria-live="polite"></div><button title="Copy to clipboard" data-copied="Copied!" data-code="on: aFactory    | room1 room2 |    room1 := (aFactory make: #room) location: 1@1.    room2 := (aFactory make: #room) location: 2@1.    door := (aFactory make: #door) from: room1 to: room2.    room1        atSide: #north put: (aFactory make: #wall);        atSide: #east put: door;        atSide: #south put: (aFactory make: #wall);        atSide: #west put: (aFactory make: #wall).    room2        atSide: #north put: (aFactory make: #wall);        atSide: #east put: (aFactory make: #wall);        atSide: #south put: (aFactory make: #wall);        atSide: #west put: door.    ^ Maze new        addRoom: room1;        addRoom: room2;        yourself"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h2"><h2 id="known-uses">Known Uses</h2><a class="sl-anchor-link" href="#known-uses"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Known Uses”</span></a></div>
<p>Perhaps the first example of the Prototype pattern was in Ivan Sutherland’s Sketchpad system [Sut63]. The first widely known application of the pattern in an object-oriented language was in ThingLab, where users could form a composite object and then promote it to a prototype by installing it in a library of reusable objects [Bor81]. Goldberg and Robson mention prototypes as a pattern [GR83], but Coplien [Cop92] gives a much more complete description. He describes idioms related to the Prototype pattern for C++ and gives many examples and variations.</p>
<p>Etgdb is a debugger front-end based on ET++ that provides a point-and-click interface to different line-oriented debuggers. Each debugger has a corresponding DebuggerAdaptor subclass. For example, Gdb Adaptor adapts etgdb to the command syntax of GNU gdb, while SunDbxAdaptor adapts etgdb to Sun’s dbx debugger. Etgdb does not have a set of DebuggerAdaptor classes hard-coded into it. Instead, it reads the name of the adaptor to use from an environment variable, looks for a prototype with the specified name in a global table, and then clones the prototype. New debuggers can be added to etgdb by linking it with the DebuggerAdaptor that works for that debugger.</p>
<p>The “interaction technique library” in Mode Composer stores prototypes of objects that support various interaction techniques [Sha90]. Any interaction technique created by the Mode Composer can be used as a prototype by placing it in this library. The Prototype pattern lets Mode Composer support an unlimited set of interaction techniques.</p>
<p>The music editor example discussed earlier is based on the Unidraw drawing framework [VL90].</p>
<div class="sl-heading-wrapper level-h2"><h2 id="related-patterns">Related Patterns</h2><a class="sl-anchor-link" href="#related-patterns"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Related Patterns”</span></a></div>
<p>Prototype and Abstract Factory (87) are competing patterns in some ways, as we discuss at the end of this chapter. They can also be used together, however. An Abstract Factory might store a set of prototypes from which to clone and return product objects.</p>
<p>Designs that make heavy use of the Composite (163) and Decorator (175) patterns often can benefit from Prototype as well.</p> </div> <footer class="sl-flex astro-3yyafb3n"> <div class="meta sl-flex astro-3yyafb3n">   </div> <div class="pagination-links print:hidden astro-u2l5gyhi" dir="ltr"> <a href="/design_patterns/creational/factory_methot/" rel="prev" class="astro-u2l5gyhi"> <svg aria-hidden="true" class="astro-u2l5gyhi astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.5rem;"><path d="M17 11H9.41l3.3-3.29a1.004 1.004 0 1 0-1.42-1.42l-5 5a1 1 0 0 0-.21.33 1 1 0 0 0 0 .76 1 1 0 0 0 .21.33l5 5a1.002 1.002 0 0 0 1.639-.325 1 1 0 0 0-.219-1.095L9.41 13H17a1 1 0 0 0 0-2Z"/></svg> <span class="astro-u2l5gyhi"> Previous <br class="astro-u2l5gyhi"> <span class="link-title astro-u2l5gyhi">Factory Method</span> </span> </a> <a href="/design_patterns/creational/singleton/" rel="next" class="astro-u2l5gyhi"> <svg aria-hidden="true" class="astro-u2l5gyhi astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.5rem;"><path d="M17.92 11.62a1.001 1.001 0 0 0-.21-.33l-5-5a1.003 1.003 0 1 0-1.42 1.42l3.3 3.29H7a1 1 0 0 0 0 2h7.59l-3.3 3.29a1.002 1.002 0 0 0 .325 1.639 1 1 0 0 0 1.095-.219l5-5a1 1 0 0 0 .21-.33 1 1 0 0 0 0-.76Z"/></svg> <span class="astro-u2l5gyhi"> Next <br class="astro-u2l5gyhi"> <span class="link-title astro-u2l5gyhi">Singleton</span> </span> </a> </div>   </footer>  </div> </div>   </main> </div> </div>  </div> </div>  </body></html>