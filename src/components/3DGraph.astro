<div id="3d-graph" style="position:fixed; inset:0"></div>

<script is:inline src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
<script is:inline src="https://unpkg.com/three@0.160.0/examples/js/postprocessing/EffectComposer.js"></script>
<script is:inline src="https://unpkg.com/three@0.160.0/examples/js/postprocessing/RenderPass.js"></script>
<script is:inline src="https://unpkg.com/three@0.160.0/examples/js/postprocessing/UnrealBloomPass.js"></script>
<script is:inline src="https://unpkg.com/3d-force-graph"></script>

<script is:inline>
const gData = {
  nodes: [
    { id: 'Animal', color: '#ff0000' },
    { id: 'Mammal', color: '#00ff00' },
    { id: 'Reptile', color: '#0000ff' },
    { id: 'Canine', color: '#00ffff' },
    { id: 'Feline', color: '#ffaa00' },
    { id: 'Dog', color: '#00ffff' },
    { id: 'Cat', color: '#ffaa00' },
    { id: 'Lizard', color: '#0000ff' }
  ],
  links: [
    { source: 'Mammal', target: 'Animal', color:'#ff00ff' },
    { source: 'Reptile', target: 'Animal', color:'#ff00ff' },
    { source: 'Canine', target: 'Mammal', color:'#00ffff' },
    { source: 'Feline', target: 'Mammal', color:'#00ffff' },
    { source: 'Dog', target: 'Canine', color:'#00ffff' },
    { source: 'Cat', target: 'Feline', color:'#ffaa00' },
    { source: 'Lizard', target: 'Reptile', color:'#ffaa00' }
  ]
};

const Graph = ForceGraph3D()(document.getElementById('3d-graph'))
  .graphData(gData)
  .backgroundColor('#000003')
  .nodeLabel('id')
  .nodeThreeObject(node => {
    const color = new THREE.Color(node.color).convertSRGBToLinear().multiplyScalar(5);
    return new THREE.Mesh(
      new THREE.SphereGeometry(4, 32, 32),
      new THREE.MeshStandardMaterial({
        color,
        emissive: color,
        emissiveIntensity: 3, // ðŸ‘ˆ hodnÄ› svÃ­tÃ­
        roughness: 0.2,
        metalness: 0
      })
    );
  })
  .linkMaterial(link => {
    const color = new THREE.Color(link.color || '#ffffff').convertSRGBToLinear().multiplyScalar(3);
    return new THREE.MeshStandardMaterial({
      color,
      emissive: color,
      emissiveIntensity: 2, // ðŸ‘ˆ svÃ­tÃ­ i linky
      transparent: true,
      opacity: 0.8
    });
  });

// --- Bloom efekt ---
const bloomPass = new THREE.UnrealBloomPass(new THREE.Vector2(window.innerWidth, window.innerHeight), 3, 1, 0);
Graph.postProcessingComposer().addPass(bloomPass);
</script>